(function(n){var t=function(t,i){this.elem=t;var r=this.elem.data("plugin-options");if(this.options=n.extend({},n.fn.infiniteScroller.defaults,i,r),this.options.url===null)throw"A URL is required to use this plugin";};t.prototype={init:function(){var u=this,t=u.options,e=new Date,i=n('<div id="infinite-scroller-loader-'+e.getTime()+'" class="vems-fade"><i class="'+t.loaderIcon+'"><\/i><span style="padding-left:8px">'+t.loaderText+"<\/span><\/div>"),f=0;return t.isIncrement=!0,t.loading=!1,t.disabled=!1,t.displayLoading&&(i.css(t.loaderCss),i.appendTo(u.elem),i.css("opacity",0),t.loader=i),u.elem.scroll(function(){if(!t.loading&&!t.disabled){var u=n(this).scrollTop(),i=n(this),e=parseInt(i.css("padding-top"))+parseInt(i.css("padding-bottom")),o={el:i,elHeight:i.height(),scrollPos:i.scrollTop(),scrollHeight:i[0].scrollHeight-e};t.direction=u>f?"down":"up",f=u,setTimeout(function(){r(o,t)},t.eventTimeout)}}),this},getCurrentIncrement:function(){var n=this,t=n.options;return t.currentIcrement},isLoading:function(){var n=this,t=n.options;return t.loading},disableHandler:function(n){this.options.disabled=n}};var r=function(n,t){n.scrollPos>=n.scrollHeight-n.elHeight?(t.isIncrement=!0,i(t)):n.scrollPos==0&&(t.isIncrement=!1,i(t))},u=function(n){var t=n.dataTemplate,i=n.dataMap;Object.keys(t).map(function(r,u){var f=i[u].value,e=n.isIncrement?i[u].incrementSize:i[u].incrementSize*-1;t[r]=i[u].isIncremental?Object.prototype.toString.call(f)==="[object Date]"?moment(new Date(f.setDate(f.getDate()+e))):f+e:f}),n.currentIcrement=t},i=function(t){t.loading=!0,t.loader.css("opacity",t.loaderCss.opacity),u(t),n.ajax({type:"POST",url:t.url,data:JSON.stringify(t.dataTemplate),contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){t.successCallback(n,t.isIncrement),setTimeout(function(){t.loader.css("opacity",0)},750),t.loading=!1},error:function(n,t,i){console.log(i)}})},e=function(t,i){if(n("."+i.visibleElementClass,t).length!=0){var e=0,o=t.height(),r=n("."+i.visibleElementClass,t),u=r.position().top,s=u+r.height(),f=i.direction;console.log(f),o<u||e>s||i.visibleElementTrigger(r,f)}},f=function(n,t,i){if(i.options.hasOwnProperty(n))i.options[n]=t;else throw'The Infinite Scroller plugin does not have a "'+n+'" option to update';};n.fn.infiniteScroller=function(i){var u=this,e=u.data("vems_infiniteScroller"),r;if(typeof i=="string"){f(i,arguments[1],e);return}return e?e:(this.each(function(){var e=new t(n(this),i).init(),f=u.data("vems_infiniteScroller",e);r=r?r.add(f):f}),r?r:u)},n.fn.infiniteScroller.defaults={bufferPx:250,url:null,dataTemplate:{date:""},dataMap:[{value:new Date,isIncremental:!0,incrementSize:1}],eventTimeout:0,successCallback:function(){},visibleElementClass:null,visibleElementTrigger:function(){},displayLoading:!0,loaderIcon:"fa fa-spinner fa-pulse",loaderText:"Loading More Bookings...",loaderCss:{position:"fixed",bottom:"15px",width:"200px",height:"25px",background:"#000",left:"40px",opacity:.75,borderRadius:"10px",padding:"10px",lineHeight:"25px"}}})(jQuery),function(n){var r=function(t,i){this.elem=t;var r=this.elem.data("plugin-options");this.options=n.extend({},n.fn.locationpicker.defaults,i,r)};r.prototype={init:function(){var n=this;return u(n),f(n),e(n),n.elem.trigger("ready"),n},updateFilter:function(n){var t=this;return t.options.activeFilter=n,t.init(),t.elem.trigger("filterChanged"),t.elem},getFilter:function(){var n=this;return n.options.activeFilter},getLocation:function(){var n=this;return n.options.selectedLocation}};var t="",u=function(i){var r,u;t?n("#"+t).remove():t=i.elem[0].id+"LpFilter",r=document.createElement("div"),r.id=t,u=[{filter:"favorites",label:i.options.favoritesLabelText,imgClass:i.options.favoritesImgClass,shown:i.options.showFavorites},{filter:"buildings",label:i.options.buildingsLabelText,imgClass:i.options.buildingsImgClass,shown:i.options.showBuildings},{filter:"areas",label:i.options.areasLabelText,imgClass:i.options.areasImgClass,shown:i.options.showAreas},{filter:"views",label:i.options.viewsLabelText,imgClass:i.options.viewsImgClass,shown:i.options.showViews}],n.each(u,function(n,t){var u=document.createElement("button"),f,e;u.type="button",u.onclick=function(){return i.updateFilter(t.filter),!1},u.classList.add("lp-filter"),u.title=t.label,t.filter==i.options.activeFilter&&u.classList.add("lp-filter-active"),t.shown||(u.style.display="none"),f=document.createElement("span"),f.textContent=t.label,f.classList.add("lp-label"),i.options.labelTextClass&&f.classList.add(i.options.labelTextClass),e=document.createElement("img"),e.classList.add("lp-icon"),e.classList.add(t.imgClass),u.appendChild(f),u.appendChild(document.createElement("br")),u.appendChild(e),r.appendChild(u)}),i.options.filterContainer?n(i.options.filterContainer).append(r):i.elem.append(r)},i="",f=function(t){i?n("#"+i).remove():i=t.elem[0].id+"LpDropdown";var u=n('<div id="'+i+'"><\/div>'),r="Select";switch(t.options.activeFilter){case"favorites":r+=" "+t.options.favoritesLabelText;break;case"buildings":r+=" "+t.options.buildingsLabelText;break;case"areas":r+=" "+t.options.areasLabelText;break;case"views":r+=" "+t.options.viewsLabelText}r+="...",u.dxSelectBox({dataSource:t.options.dataSource,displayExpr:"locationDesc",valueExpr:"locationId",value:n.map(t.options.dataSource,function(n){return n.locationId}).indexOf(t.options.selectedLocation)>-1?t.options.selectedLocation:null,showClearButton:!1,width:t.options.dropdownWidth?t.options.dropdownWidth:t.elem.width(),placeholder:r,onValueChanged:function(n){t.options.selectedLocation=n.value,t.elem.trigger("locationChanged")}}).dxSelectBox("instance"),t.options.dropdownContainer?n(t.options.dropdownContainer).append(u):t.elem.append(u)},e=function(n){var t=n.elem;t.unbind("filterChanged"),t.unbind("locationChanged"),t.unbind("ready"),t.bind("filterChanged",function(t){t.stopPropagation(),n.options.filterChanged(n.options.activeFilter)}),t.bind("locationChanged",function(t){t.stopPropagation(),n.options.locationChanged(n.getLocation())}),t.bind("ready",function(t){t.stopPropagation(),n.options.ready()})},o=function(n,t,i){i.options.hasOwnProperty(n)?(i.options[n]=t,i.init()):console.log('The locationpicker plugin does not have a(n) "'+n+'" option to update.')};n.fn.locationpicker=function(t){var i=this,u=i.data("vems_locationpicker"),f;if(typeof t=="string"){o(t,arguments[1],u);return}return u?u:(this.each(function(){var e=new r(n(this),t).init(),u=i.data("vems_locationpicker",e);f=f?f.add(u):u}),i)},n.fn.locationpicker.defaults={dataSource:[],activeFilter:"favorites",selectedLocation:"",dropdownWidth:"",labelTextClass:"",favoritesLabelText:"Favorites",buildingsLabelText:"Buildings",areasLabelText:"Areas",viewsLabelText:"Views",favoritesImgClass:"lp-icon-favorites",buildingsImgClass:"lp-icon-buildings",areasImgClass:"lp-icon-areas",viewsImgClass:"lp-icon-views",showFavorites:!0,showBuildings:!0,showAreas:!0,showViews:!0,filterContainer:"",dropdownContainer:"",filterChanged:function(){},locationChanged:function(){},ready:function(){}}}(jQuery)