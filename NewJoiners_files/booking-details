function bookingDetailsViewModel(n){var i=this,r;if(i.details=ko.observable({}),i.Bookings=ko.observableArray([]),i.ShowICS=ko.observable(n.ShowICS),i.BookingId=ko.observable({}),i.ReservationId=ko.observable({}),i.GroupId=ko.observable(-1),i.BuildingId=ko.observable(-1),i.EventStart=ko.observable(moment()),i.EventEnd=ko.observable(moment()),i.EventName=ko.observable(""),i.Location=ko.observable(""),i.UserCanViewLocations=ko.observable(!1),i.UserCanViewDetails=ko.observable(!1),i.ShowLocation=ko.observable(!1),i.ShowGroupName=ko.observable(!1),i.ReservationSummaryLink=ko.observable(""),i.EditBookingLink=ko.observable(""),i.UnableToEditMessage=ko.observable(""),i.IsMobile=ko.observable(DevExpress.devices.real().phone),i.IsExchange=ko.observable(!1),i.IsVideoConference=ko.observable(!1),i.IsHost=ko.observable(!1),i.IsCheckedIn=ko.observable(!1),i.ShowCheckinButton=ko.observable(!1),i.AllowCancel=ko.observable(!1),i.RequiresCancelReason=ko.observable(!1),i.DefaultCancelReason=ko.observable(-1),i.AllowEndNow=ko.observable(!1),i.HasServices=ko.observable(!1),i.MultiLocationPAM=ko.observable(!1),i.OccurrenceCount=ko.observable(0),i.SuppressEventName=ko.observable(!1),i.ConferenceCode=ko.observable(""),i.ConferenceURL=ko.observable(""),i.CancelReasons=ko.observableArray([]),i.FieldNames=ko.observableArray([]),i.ScreenText={},i.modalType=ModalType.BookingOnly,i.cancelAlignment=ko.pureComputed(function(){return i.IsCheckedIn()||i.ShowCheckinButton()?"align-center":"align-left"}),i.endNowAlignment=ko.pureComputed(function(){var n=i.IsCheckedIn()||i.ShowCheckinButton(),t=i.AllowCancel();return n&&t?"align-right":!n&&!t?"align-left":"align-center"}),n.ScreenText&&n.ScreenText.TimeText&&n.ScreenText.DateText&&n.ScreenText.EventNameText&&n.ScreenText.LocationText&&n.ScreenText.GroupNameText&&n.ScreenText.NoBookingsMessage&&n.ScreenText.BookingDetailsText&&n.ScreenText.EventDetailsText&&n.ScreenText.RelatedEventsText&&n.ScreenText.DownloadIcsText&&n.ScreenText.ShareText&&n.ScreenText.CloseText&&n.ScreenText.FirstBookingText&&n.ScreenText.LastBookingText&&n.ScreenText.EditText&&n.ScreenText.CheckedInText&&n.ScreenText.CheckInText&&n.ScreenText.CancelText&&n.ScreenText.EndNowText&&n.ScreenText.EndNowConfirmText&&n.ScreenText.YesEndBookingText&&n.ScreenText.NoDontEndText&&n.ScreenText.CancelBookingQuestionText&&n.ScreenText.CancelReasonText&&n.ScreenText.CancelNotesText&&n.ScreenText.YesCancelText&&n.ScreenText.NoCancelText?(r=$.extend({},n.ScreenText),$.each(n.ScreenText,function(n,t){r[n]=$.trim(t)}),i.ScreenText=r):console.error("screen text items required in ScreenText object: TimeText, DateText, EventNameText, LocationText, GroupNameText, NoBookingsMessage, BookingDetailsText, EventDetailsText, RelatedEventsText, DownloadIcsText, ShareText, CloseText, FirstBookingText, LastBookingText, EditText, CheckedInText, CheckInText, CancelText, EndNowText"),i.hide=function(){return $("#booking-details-modal").modal("hide"),!1},i.show=function(n,t){if((!n||n<=0)&&(!t||t<=0))return!1;i.ReservationId(t?t:0),i.BookingId(n?n:0),i.modalType=t>0?ModalType.Reservation:ModalType.BookingOnly,i.details([]),i.Bookings([]),i.IsCheckedIn(!1),i.ShowCheckinButton(!1),i.AllowCancel(!1),i.AllowEndNow(!1),$(".modal-loading-overlay").show();var r=JSON.stringify({bookingId:n,reservationId:t});return vems.ajaxPost({url:vems.serverApiUrl()+"/GetBookingAndReservationDetails",data:r,success:function(n){var t=JSON.parse(n.d),r;t&&t.BookingFieldData.length>=0&&($("#booking-details-grid tbody > tr").remove(),i.Bookings([]),$("#booking-details-grid").trigger("destroy"),i.ReservationId(t.ReservationId),i.GroupId(t.GroupId),i.BuildingId(t.BuildingId),i.EventStart(t.EventStart),i.EventEnd(t.EventEnd),i.EventName(t.EventName),i.Location(t.Location),i.details(t.BookingFieldData),i.ShowICS(t.ShowICS),i.ShowLocation(t.ShowLocation),i.ShowGroupName(t.ShowGroupName),i.UserCanViewLocations(t.UserCanViewLocations),i.UserCanViewDetails(t.UserCanViewDetails),i.ReservationSummaryLink(t.ReservationSummaryLink),i.EditBookingLink(t.EditBookingLink),i.UnableToEditMessage(t.UnableToEditMessage==null?"":t.UnableToEditMessage),i.IsExchange(t.IsExchange),i.IsVideoConference(t.IsVideoConference),i.IsHost(t.IsHost),i.IsCheckedIn(t.IsCheckedIn),i.ShowCheckinButton(t.ShowCheckinButton),i.AllowCancel(t.AllowCancel),i.RequiresCancelReason(t.RequiresCancelReason),i.DefaultCancelReason(t.DefaultCancelReason),i.AllowEndNow(t.AllowEndNow),i.HasServices(t.HasServices),i.MultiLocationPAM(t.MultiLocationPAM),i.CancelReasons(t.CancelReasons),i.FieldNames(t.FieldNames),i.OccurrenceCount(t.OccurrenceCount),i.ConferenceCode(t.ConferenceCode),i.ConferenceURL(t.ConferenceURL),i.SuppressEventName(t.SuppressEventName),i.IsMobile()&&(i.HasServices()||i.MultiLocationPAM())&&i.EditBookingLink(""),ko.mapping.fromJS(t.Bookings,{},i.Bookings),t.ShowHelpTextRecord?$("#VEMSBookingDetails").show():$("#VEMSBookingDetails").hide(),vems.enableSocialMedia&&vems.enableSocialMedia==1&&typeof addthis!="undefined"&&($(".addthis_toolbox").remove(),r=$('<div class="addthis_toolbox addthis_default_style"><\/div>'),r.attr("addthis:url",t.ShareLink),r.attr("addthis:title",vems.decodeHtml(t.ShareTitle)),r.append($('<a class="addthis_button_compact"><\/a>')),r.appendTo("#add-this-container"),addthis.toolbox(".addthis_toolbox")),$(".at-icon-wrapper span").remove(),$(".at-icon-wrapper").append('<span class="at-label">'+i.ScreenText.ShareText+"<\/span>"),i.IsMobile()||(t.Bookings.length>0?t.ShowICS?$("#booking-details-grid").tablesorter({sortList:[[1,0]],headers:{0:{sorter:!1},1:{sorter:"moment-dates"}}}):$("#booking-details-grid").tablesorter({sortList:[[0,0]],headers:{0:{sorter:"moment-dates"}}}):$("#booking-details-grid tbody").append('<tr><td colspan="6" style="text-align:center;">'+i.ScreenText.NoBookingsMessage+"<\/td><\/tr>"))),$(".modal-loading-overlay").hide()},error:function(n,t,i){return console.log(i),$(".modal-loading-overlay").hide(),!1}}),$("#booking-details-modal .modal-body .tab-pane").height("360px"),$("#booking-details-modal").modal("show"),!1},i.eventNameClicked=function(){vems.pageLoading(!0),window.location.href=i.ReservationSummaryLink()},i.eventEditClicked=function(){var r,u;vems.pageLoading(!0),vems.bookingDetailsVM.EditBookingLink().length>0?i.IsMobile()?(r=JSON.stringify({bookingId:i.BookingId(),reservationId:i.ReservationId()}),vems.ajaxPost({url:vems.serverApiUrl()+"/GetMobileEditLink",data:r,success:function(n){var t=JSON.parse(n.d);t.Success&&(window.location.href=t.SuccessMessage)},error:function(n,t,i){return console.log(i),!1}})):(u=$.grep(i.Bookings(),function(n){return n.Id()!=i.BookingId()&&n.StatusTypeId()!==-12}).length,window.location.href=u===0?i.EditBookingLink():i.ReservationSummaryLink()):window.location.href=i.ReservationSummaryLink()},i.checkInToEvent=function(n){i.ShowCheckinButton(!1),vems.ajaxPost({url:vems.serverApiUrl()+"/CheckInToBooking",data:JSON.stringify({bookingId:n.BookingId()}),success:function(n){var t=JSON.parse(n.d),r;t.Success?(r=JSON.parse(t.JsonData),r.IsCheckedIn?(vems.showToasterMessage("",t.SuccessMessage,"success"),i.IsCheckedIn(!0)):(vems.showErrorToasterMessage(t.ErrorMessage),i.ShowCheckinButton(!0))):(vems.showErrorToasterMessage(t.ErrorMessage),i.ShowCheckinButton(!0))}})},i.endBookingNow=function(n,t){var r=$("#endnow-modal-bd"),f=$("#endBookingBtn-bd",r),e=$(".date",r),o=$(".event-name",r),s=$(".location",r),h=$(t.target).closest("tr"),u;e.html("<strong>"+moment(n.EventStart()).format("dddd, MMMM Do, YYYY, [from] h:mm [to {0}] A").replace("{0}",moment(n.EventEnd()).format("h:mm"))+"<\/strong>"),o.text(vems.htmlDecode(n.EventName())),s.text(vems.htmlDecode(n.Location())),r.modal(),u={reservationId:n.ReservationId(),bookingId:n.BookingId()};f.one("click",function(){vems.ajaxPost({url:vems.serverApiUrl()+"/EndBookingNow",data:JSON.stringify(u),success:function(t){var u=JSON.parse(t.d),f;u.Success?(r.modal("hide"),i.show(i.BookingId(),i.ReservationId()),f=u.SuccessMessage.replace("{0}","<b>"+n.EventName()+"<\/b>"),vems.showToasterMessage("",f,"success"),i.AllowEndNow(!1)):vems.showErrorToasterMessage(u.ErrorMessage)}})})},i.cancelBooking=function(n,t){var e=$("#VirtualEmsForm"),r=$("#cancel-modal-bd"),o=$("#cancel-btn-yes-bd",r),c=$(".date",r),l=$(".event-name",r),a=$(".location",r),s=$(".vc-host-warning",r),h=$(".cal-occ-warning",r),f=$(".reason select",r),u=$(".notes textarea",r),v=$(t.target).closest(".btn-xs");if(e.validate(vems.validationClasses),c.html("<strong>"+moment(n.EventStart()).format("dddd, LL, [from] LT [to {0}]").replace("{0}",moment(n.EventEnd()).format("LT"))+"<\/strong>"),l.text(vems.htmlDecode(n.EventName())),a.text(vems.htmlDecode(n.Location())),n.RequiresCancelReason()){$(".reason",r).show(),$(".notes",r).show(),f.rules("add",{required:!0}),u.rules("add",{sanitize:!0});f.on("change",function(){$("option:selected",this).data("notes-required")?u.rules("add",{required:!0,trim:!0}):u.rules()&&Object.keys(u.rules()).length>0&&(u.rules("remove","required"),u.rules("remove","trim"),e.data("validator").resetForm())})}else $(".reason",r).hide(),$(".notes",r).hide();s.hide(),h.hide(),n.OccurrenceCount()>1&&(n.IsHost()?s.show():n.IsExchange()&&h.show()),r.modal();r.on("shown.bs.modal",function(){e.data("validator").resetForm(),f.val($.isFunction(n.defaultCancelReason)?n.defaultCancelReason():n.DefaultCancelReason()).change()});r.on("hidden.bs.modal",function(){f.val(""),u.val(""),u.rules("remove"),o.off("click"),$(".modal-loading-overlay").hide()});o.on("click",function(){if(!e.valid())return!1;var o={reservationId:n.ReservationId(),bookingId:n.BookingId(),cancelReason:n.RequiresCancelReason()?f.val():0,cancelNotes:n.RequiresCancelReason()?u.val():""};vems.pageLoading(!0),vems.ajaxPost({url:vems.serverApiUrl()+"/CancelBooking",data:JSON.stringify(o),success:function(t){var u,f;if(vems.pageLoading(!1),u=JSON.parse(t.d),u.Success)r.modal("hide"),i.show(i.BookingId(),i.ReservationId()),f=u.SuccessMessage.replace("{0}","<b>"+n.EventName()+"<\/b>"),vems.showToasterMessage("",f,"success");else return vems.showErrorToasterMessage(u.ErrorMessage),!1},error:function(){vems.pageLoading(!1)}})})},i.closeCancelModal=function(){$("#cancel-modal-bd").modal("hide")},i.closeEndNowModal=function(){$("#endnow-modal-bd").modal("hide")},DevExpress.devices.real().phone)$("#booking-details-modal").off("shown.bs.modal").on("shown.bs.modal",function(){vems.convertTabsForMobile()})}(function(n){"use strict";var t=n.tablesorter={version:"2.26.1",parsers:[],widgets:[],defaults:{theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,tabIndex:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,resort:!0,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortStable:!1,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",duplicateSpan:!0,textExtraction:"basic",textAttribute:"data-text",textSorter:null,numberSorter:null,initWidgets:!0,widgetClass:"widget-{name}",widgets:[],widgetOptions:{zebra:["even","odd"]},initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssNone:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssInfoBlock:"tablesorter-infoOnly",cssNoSort:"tablesorter-noSort",cssIgnoreRow:"tablesorter-ignoreRow",cssIcon:"tablesorter-icon",cssIconNone:"",cssIconAsc:"",cssIconDesc:"",pointerClick:"click",pointerDown:"mousedown",pointerUp:"mouseup",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]},css:{table:"tablesorter",cssHasChild:"tablesorter-hasChildRow",childRow:"tablesorter-childRow",colgroup:"tablesorter-colgroup",header:"tablesorter-header",headerRow:"tablesorter-headerRow",headerIn:"tablesorter-header-inner",icon:"tablesorter-icon",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc",sortNone:"tablesorter-headerUnSorted"},language:{sortAsc:"Ascending sort applied, ",sortDesc:"Descending sort applied, ",sortNone:"No sort applied, ",sortDisabled:"sorting is disabled",nextAsc:"activate to apply an ascending sort",nextDesc:"activate to apply a descending sort",nextNone:"activate to remove the sort"},regex:{templateContent:/\{content\}/g,templateIcon:/\{icon\}/g,templateName:/\{name\}/i,spaces:/\s+/g,nonWord:/\W/g,formElements:/(input|select|button|textarea)/i,chunk:/(^([+\-]?(?:\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,chunks:/(^\\0|\\0$)/,hex:/^0x[0-9a-f]+$/i,comma:/,/g,digitNonUS:/[\s|\.]/g,digitNegativeTest:/^\s*\([.\d]+\)/,digitNegativeReplace:/^\s*\(([.\d]+)\)/,digitTest:/^[\-+(]?\d+[)]?$/,digitReplace:/[,.'"\s]/g},string:{max:1,min:-1,emptymin:1,emptymax:-1,zero:0,none:0,"null":0,top:!0,bottom:!1},keyCodes:{enter:13},dates:{},instanceMethods:{},setup:function(i,r){if(!i||!i.tHead||i.tBodies.length===0||i.hasInitialized===!0){r.debug&&(i.hasInitialized?console.warn("Stopping initialization. Tablesorter has already been initialized"):console.error("Stopping initialization! No table, thead or tbody",i));return}var f="",u=n(i),e=n.metadata;i.hasInitialized=!1,i.isProcessing=!0,i.config=r,n.data(i,"tablesorter",r),r.debug&&(console[console.group?"group":"log"]("Initializing tablesorter"),n.data(i,"startoveralltimer",new Date)),r.supportsDataObject=function(n){return n[0]=parseInt(n[0],10),n[0]>1||n[0]===1&&parseInt(n[1],10)>=4}(n.fn.jquery.split(".")),r.emptyTo=r.emptyTo.toLowerCase(),r.stringTo=r.stringTo.toLowerCase(),r.last={sortList:[],clickedIndex:-1},/tablesorter\-/.test(u.attr("class"))||(f=r.theme!==""?" tablesorter-"+r.theme:""),r.table=i,r.$table=u.addClass(t.css.table+" "+r.tableClass+f).attr("role","grid"),r.$headers=u.find(r.selectorHeaders),r.namespace=r.namespace?"."+r.namespace.replace(t.regex.nonWord,""):".tablesorter"+Math.random().toString(16).slice(2),r.$table.children().children("tr").attr("role","row"),r.$tbodies=u.children("tbody:not(."+r.cssInfoBlock+")").attr({"aria-live":"polite","aria-relevant":"all"}),r.$table.children("caption").length&&(f=r.$table.children("caption")[0],f.id||(f.id=r.namespace.slice(1)+"caption"),r.$table.attr("aria-labelledby",f.id)),r.widgetInit={},r.textExtraction=r.$table.attr("data-text-extraction")||r.textExtraction||"basic",t.buildHeaders(r),t.fixColumnWidth(i),t.addWidgetFromClass(i),t.applyWidgetOptions(i),t.setupParsers(r),r.totalRows=0,r.delayInit||t.buildCache(r),t.bindEvents(i,r.$headers,!0),t.bindMethods(r),r.supportsDataObject&&typeof u.data().sortlist!="undefined"?r.sortList=u.data().sortlist:e&&u.metadata()&&u.metadata().sortlist&&(r.sortList=u.metadata().sortlist),t.applyWidget(i,!0),r.sortList.length>0?t.sortOn(r,r.sortList,{},!r.initWidgets):(t.setHeadersCss(r),r.initWidgets&&t.applyWidget(i,!1)),r.showProcessing&&u.unbind("sortBegin"+r.namespace+" sortEnd"+r.namespace).bind("sortBegin"+r.namespace+" sortEnd"+r.namespace,function(n){clearTimeout(r.timerProcessing),t.isProcessing(i),n.type==="sortBegin"&&(r.timerProcessing=setTimeout(function(){t.isProcessing(i,!0)},500))}),i.hasInitialized=!0,i.isProcessing=!1,r.debug&&(console.log("Overall initialization time: "+t.benchmark(n.data(i,"startoveralltimer"))),r.debug&&console.groupEnd&&console.groupEnd()),u.triggerHandler("tablesorter-initialized",i),typeof r.initialized=="function"&&r.initialized(i)},bindMethods:function(i){var u=i.$table,r=i.namespace,f="sortReset update updateRows updateAll updateHeaders addRows updateCell updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(r+" ");u.unbind(f.replace(t.regex.spaces," ")).bind("sortReset"+r,function(n,i){n.stopPropagation(),t.sortReset(this.config,i)}).bind("updateAll"+r,function(n,i,r){n.stopPropagation(),t.updateAll(this.config,i,r)}).bind("update"+r+" updateRows"+r,function(n,i,r){n.stopPropagation(),t.update(this.config,i,r)}).bind("updateHeaders"+r,function(n,i){n.stopPropagation(),t.updateHeaders(this.config,i)}).bind("updateCell"+r,function(n,i,r,u){n.stopPropagation(),t.updateCell(this.config,i,r,u)}).bind("addRows"+r,function(n,i,r,u){n.stopPropagation(),t.addRows(this.config,i,r,u)}).bind("updateComplete"+r,function(){this.isUpdating=!1}).bind("sorton"+r,function(n,i,r,u){n.stopPropagation(),t.sortOn(this.config,i,r,u)}).bind("appendCache"+r,function(i,r,u){i.stopPropagation(),t.appendCache(this.config,u),n.isFunction(r)&&r(this)}).bind("updateCache"+r,function(n,i,r){n.stopPropagation(),t.updateCache(this.config,i,r)}).bind("applyWidgetId"+r,function(n,i){n.stopPropagation(),t.applyWidgetId(this,i)}).bind("applyWidgets"+r,function(n,i){n.stopPropagation(),t.applyWidget(this,i)}).bind("refreshWidgets"+r,function(n,i,r){n.stopPropagation(),t.refreshWidgets(this,i,r)}).bind("removeWidget"+r,function(n,i,r){n.stopPropagation(),t.removeWidget(this,i,r)}).bind("destroy"+r,function(n,i,r){n.stopPropagation(),t.destroy(this,i,r)}).bind("resetToLoadState"+r,function(r){r.stopPropagation(),t.removeWidget(this,!0,!1),i=n.extend(!0,t.defaults,i.originalSettings),this.hasInitialized=!1,t.setup(this,i)})},bindEvents:function(i,r,u){i=n(i)[0];var e,f=i.config,o=f.namespace,s=null;u!==!0&&(r.addClass(o.slice(1)+"_extra_headers"),e=n.fn.closest?r.closest("table")[0]:r.parents("table")[0],e&&e.nodeName==="TABLE"&&e!==i&&n(e).addClass(o.slice(1)+"_extra_table")),e=(f.pointerDown+" "+f.pointerUp+" "+f.pointerClick+" sort keyup ").replace(t.regex.spaces," ").split(" ").join(o+" "),r.find(f.selectorSort).add(r.filter(f.selectorSort)).unbind(e).bind(e,function(i,u){var l,h,e,c=n(i.target),o=" "+i.type+" ";if(((i.which||i.button)===1||o.match(" "+f.pointerClick+" | sort | keyup "))&&(o!==" keyup "||i.which===t.keyCodes.enter)&&(!o.match(" "+f.pointerClick+" ")||typeof i.which=="undefined")&&(!o.match(" "+f.pointerUp+" ")||s===i.target||u===!0)){if(o.match(" "+f.pointerDown+" ")){s=i.target,e=c.jquery.split("."),e[0]==="1"&&e[1]<4&&i.preventDefault();return}if(s=null,t.regex.formElements.test(i.target.nodeName)||c.hasClass(f.cssNoSort)||c.parents("."+f.cssNoSort).length>0||c.parents("button").length>0)return!f.cancelSelection;f.delayInit&&t.isEmptyObject(f.cache)&&t.buildCache(f),l=n.fn.closest?n(this).closest("th, td"):/TH|TD/.test(this.nodeName)?n(this):n(this).parents("th, td"),e=r.index(l),f.last.clickedIndex=e<0?l.attr("data-column"):e,h=f.$headers[f.last.clickedIndex],h&&!h.sortDisabled&&t.initSort(f,h,i)}}),f.cancelSelection&&r.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"})},buildHeaders:function(i){var u,f,e,r;for(i.headerList=[],i.headerContent=[],i.sortVars=[],i.debug&&(e=new Date),i.columns=t.computeColumnIndex(i.$table.children("thead, tfoot").children("tr")),f=i.cssIcon?'<i class="'+(i.cssIcon===t.css.icon?t.css.icon:i.cssIcon+" "+t.css.icon)+'"><\/i>':"",i.$headers=n(n.map(i.$table.find(i.selectorHeaders),function(r,u){var l,h,s,c,o,e=n(r);if(!e.parent().hasClass(i.cssIgnoreRow))return l=t.getColumnData(i.table,i.headers,u,!0),i.headerContent[u]=e.html(),i.headerTemplate===""||e.find("."+t.css.headerIn).length||(c=i.headerTemplate.replace(t.regex.templateContent,e.html()).replace(t.regex.templateIcon,e.find("."+t.css.icon).length?"":f),i.onRenderTemplate&&(h=i.onRenderTemplate.apply(e,[u,c]),h&&typeof h=="string"&&(c=h)),e.html('<div class="'+t.css.headerIn+'">'+c+"<\/div>")),i.onRenderHeader&&i.onRenderHeader.apply(e,[u,i,i.$table]),s=parseInt(e.attr("data-column"),10),r.column=s,o=t.getData(e,l,"sortInitialOrder")||i.sortInitialOrder,i.sortVars[s]={count:-1,order:t.getOrder(o)?[1,0,2]:[0,1,2],lockedOrder:!1},o=t.getData(e,l,"lockedOrder")||!1,typeof o!="undefined"&&o!==!1&&(i.sortVars[s].lockedOrder=!0,i.sortVars[s].order=t.getOrder(o)?[1,1,1]:[0,0,0]),i.headerList[u]=r,e.addClass(t.css.header+" "+i.cssHeader).parent().addClass(t.css.headerRow+" "+i.cssHeaderRow).attr("role","row"),i.tabIndex&&e.attr("tabindex",0),r})),i.$headerIndexed=[],r=0;r<i.columns;r++)t.isEmptyObject(i.sortVars[r])&&(i.sortVars[r]={}),u=i.$headers.filter('[data-column="'+r+'"]'),i.$headerIndexed[r]=u.length?u.not(".sorter-false").length?u.not(".sorter-false").filter(":last"):u.filter(":last"):n();i.$table.find(i.selectorHeaders).attr({scope:"col",role:"columnheader"}),t.updateHeader(i),i.debug&&(console.log("Built headers:"+t.benchmark(e)),console.log(i.$headers))},addInstanceMethods:function(i){n.extend(t.instanceMethods,i)},setupParsers:function(n,i){var l,f,e,a,r,v,u,h,b,o,s,k,y,c,d=n.table,p=0,w={};if(n.$tbodies=n.$table.children("tbody:not(."+n.cssInfoBlock+")"),y=typeof i=="undefined"?n.$tbodies:i,c=y.length,c===0)return n.debug?console.warn("Warning: *Empty table!* Not building a parser cache"):"";for(n.debug&&(k=new Date,console[console.group?"group":"log"]("Detecting parsers for each column")),f={extractors:[],parsers:[]};p<c;){if(l=y[p].rows,l.length)for(r=0,a=n.columns,v=0;v<a;v++){if(u=n.$headerIndexed[r],u&&u.length&&(h=t.getColumnData(d,n.headers,r),s=t.getParserById(t.getData(u,h,"extractor")),o=t.getParserById(t.getData(u,h,"sorter")),b=t.getData(u,h,"parser")==="false",n.empties[r]=(t.getData(u,h,"empty")||n.emptyTo||(n.emptyToBottom?"bottom":"top")).toLowerCase(),n.strings[r]=(t.getData(u,h,"string")||n.stringTo||"max").toLowerCase(),b&&(o=t.getParserById("no-parser")),s||(s=!1),o||(o=t.detectParserForColumn(n,l,-1,r)),n.debug&&(w["("+r+") "+u.text()]={parser:o.id,extractor:s?s.id:"none",string:n.strings[r],empty:n.empties[r]}),f.parsers[r]=o,f.extractors[r]=s,e=u[0].colSpan-1,e>0))for(r+=e,a+=e;e+1>0;)f.parsers[r-e]=o,f.extractors[r-e]=s,e--;r++}p+=f.parsers.length?c:1}n.debug&&(t.isEmptyObject(w)?console.warn("  No parsers detected!"):console[console.table?"table":"log"](w),console.log("Completed detecting parsers"+t.benchmark(k)),console.groupEnd&&console.groupEnd()),n.parsers=f.parsers,n.extractors=f.extractors},addParser:function(n){for(var u=t.parsers.length,r=!0,i=0;i<u;i++)t.parsers[i].id.toLowerCase()===n.id.toLowerCase()&&(r=!1);r&&(t.parsers[t.parsers.length]=n)},getParserById:function(n){if(n=="false")return!1;for(var r=t.parsers.length,i=0;i<r;i++)if(t.parsers[i].id.toLowerCase()===n.toString().toLowerCase())return t.parsers[i];return!1},detectParserForColumn:function(i,r,u,f){for(var e,c,h,l=t.parsers.length,o=!1,s="",a=!0;s===""&&a;)u++,h=r[u],h&&u<50?h.className.indexOf(t.cssIgnoreRow)<0&&(o=r[u].cells[f],s=t.getElementText(i,o,f),c=n(o),i.debug&&console.log("Checking if value was empty on row "+u+", column: "+f+': "'+s+'"')):a=!1;while(--l>=0)if(e=t.parsers[l],e&&e.id!=="text"&&e.is&&e.is(s,i.table,o,c))return e;return t.getParserById("text")},getElementText:function(i,r,u){if(!r)return"";var o,e=i.textExtraction||"",f=r.jquery?r:n(r);return typeof e=="string"?e==="basic"&&typeof(o=f.attr(i.textAttribute))!="undefined"?n.trim(o):n.trim(r.textContent||f.text()):typeof e=="function"?n.trim(e(f[0],i.table,u)):typeof(o=t.getColumnData(i.table,e,u))=="function"?n.trim(o(f[0],i.table,u)):n.trim(f[0].textContent||f.text())},getParsedText:function(n,i,r,u){typeof u=="undefined"&&(u=t.getElementText(n,i,r));var f=""+u,e=n.parsers[r],o=n.extractors[r];return e&&(o&&typeof o.format=="function"&&(u=o.format(u,n.table,i,r)),f=e.id==="no-parser"?"":e.format(""+u,n.table,i,r),n.ignoreCase&&typeof f=="string"&&(f=f.toLowerCase())),f},buildCache:function(i,r,u){var a,s,w,v,e,y,g,c,nt,it,o,et,ot,b,k,tt,h,f,rt,d,l,p,ut=i.table,ft=i.parsers;if(i.$tbodies=i.$table.children("tbody:not(."+i.cssInfoBlock+")"),g=typeof u=="undefined"?i.$tbodies:u,i.cache={},i.totalRows=0,!ft)return i.debug?console.warn("Warning: *Empty table!* Not building a cache"):"";for(i.debug&&(et=new Date),i.showProcessing&&t.isProcessing(ut,!0),y=0;y<g.length;y++){for(tt=[],a=i.cache[y]={normalized:[]},ot=g[y]&&g[y].rows.length||0,v=0;v<ot;++v){if(b={child:[],raw:[]},c=n(g[y].rows[v]),nt=[],c.hasClass(i.cssChildRow)&&v!==0){for(l=a.normalized.length-1,k=a.normalized[l][i.columns],k.$row=k.$row.add(c),c.prev().hasClass(i.cssChildRow)||c.prev().addClass(t.css.cssHasChild),it=c.children("th, td"),l=k.child.length,k.child[l]=[],f=0,d=i.columns,e=0;e<d;e++)o=it[e],o&&(k.child[l][e]=t.getParsedText(i,o,e),h=it[e].colSpan-1,h>0&&(f+=h,d+=h)),f++;continue}for(b.$row=c,b.order=v,f=0,d=i.columns,e=0;e<d;++e){if(o=c[0].cells[e],o&&f<i.columns&&(rt=typeof ft[f]!="undefined",!rt&&i.debug&&console.warn("No parser found for row: "+v+", column: "+e+'; cell containing: "'+n(o).text()+'"; does it have a header?'),s=t.getElementText(i,o,f),b.raw[f]=s,w=t.getParsedText(i,o,f,s),nt[f]=w,rt&&(ft[f].type||"").toLowerCase()==="numeric"&&(tt[f]=Math.max(Math.abs(w)||0,tt[f]||0)),h=o.colSpan-1,h>0)){for(p=0;p<=h;)w=i.duplicateSpan||p===0?s:typeof i.textExtraction!="string"?t.getElementText(i,o,f+p)||"":"",b.raw[f+p]=w,nt[f+p]=w,p++;f+=h,d+=h}f++}nt[i.columns]=b,a.normalized[a.normalized.length]=nt}a.colMax=tt,i.totalRows+=a.normalized.length}if(i.showProcessing&&t.isProcessing(ut),i.debug){for(l=Math.min(5,i.cache[0].normalized.length),console[console.group?"group":"log"]("Building cache for "+i.totalRows+" rows (showing "+l+" rows in log)"+t.benchmark(et)),s={},e=0;e<i.columns;e++)for(f=0;f<l;f++)s["row: "+f]||(s["row: "+f]={}),s["row: "+f][i.$headerIndexed[e].text()]=i.cache[0].normalized[f][e];console[console.table?"table":"log"](s),console.groupEnd&&console.groupEnd()}n.isFunction(r)&&r(ut)},getColumnText:function(i,r,u,f){i=n(i)[0];var h,c,l,e,b,k,a,v,y,p,d=typeof u=="function",w=r==="all",o={raw:[],parsed:[],$cell:[]},s=i.config;if(t.isEmptyObject(s))s.debug&&console.warn("No cache found - aborting getColumnText function!");else{for(b=s.$tbodies.length,h=0;h<b;h++)for(l=s.cache[h].normalized,k=l.length,c=0;c<k;c++)(e=l[c],!f||e[s.columns].$row.is(f))&&(p=!0,v=w?e.slice(0,s.columns):e[r],e=e[s.columns],a=w?e.raw:e.raw[r],y=w?e.$row.children():e.$row.children().eq(r),d&&(p=u({tbodyIndex:h,rowIndex:c,parsed:v,raw:a,$row:e.$row,$cell:y})),p!==!1&&(o.parsed[o.parsed.length]=v,o.raw[o.raw.length]=a,o.$cell[o.$cell.length]=y));return o}},setHeadersCss:function(i){var f,r,e,u=i.sortList,o=u.length,c=t.css.sortNone+" "+i.cssNone,s=[t.css.sortAsc+" "+i.cssAsc,t.css.sortDesc+" "+i.cssDesc],h=[i.cssIconAsc,i.cssIconDesc,i.cssIconNone],a=["ascending","descending"],l=i.$table.find("tfoot tr").children("td, th").add(n(i.namespace+"_extra_headers")).removeClass(s.join(" "));for(i.$headers.removeClass(s.join(" ")).addClass(c).attr("aria-sort","none").find("."+t.css.icon).removeClass(h.join(" ")).addClass(h[2]),r=0;r<o;r++)if(u[r][1]!==2&&(f=i.$headers.filter(function(n){for(var r=!0,f=i.$headers.eq(n),u=parseInt(f.attr("data-column"),10),e=u+i.$headers[n].colSpan;u<e;u++)r=r?r||t.isValueInArray(u,i.sortList)>-1:!1;return r}),f=f.not(".sorter-false").filter('[data-column="'+u[r][0]+'"]'+(o===1?":last":"")),f.length)){for(e=0;e<f.length;e++)f[e].sortDisabled||f.eq(e).removeClass(c).addClass(s[u[r][1]]).attr("aria-sort",a[u[r][1]]).find("."+t.css.icon).removeClass(h[2]).addClass(h[u[r][1]]);l.length&&l.filter('[data-column="'+u[r][0]+'"]').removeClass(c).addClass(s[u[r][1]])}for(o=i.$headers.length,r=0;r<o;r++)t.setColumnAriaLabel(i,i.$headers.eq(r))},setColumnAriaLabel:function(i,r,u){if(r.length){var e=parseInt(r.attr("data-column"),10),o=r.hasClass(t.css.sortAsc)?"sortAsc":r.hasClass(t.css.sortDesc)?"sortDesc":"sortNone",f=n.trim(r.text())+": "+t.language[o];r.hasClass("sorter-false")||u===!1?f+=t.language.sortDisabled:(u=i.sortVars[e].order[(i.sortVars[e].count+1)%(i.sortReset?3:2)],f+=t.language[u===0?"nextAsc":u===1?"nextDesc":"nextNone"]),r.attr("aria-label",f)}},updateHeader:function(n){for(var f,r,u,e=n.table,o=n.$headers.length,i=0;i<o;i++)r=n.$headers.eq(i),u=t.getColumnData(e,n.headers,i,!0),f=t.getData(r,u,"sorter")==="false"||t.getData(r,u,"parser")==="false",t.setColumnSort(n,r,f)},setColumnSort:function(n,t,i){var r=n.table.id;t[0].sortDisabled=i,t[i?"addClass":"removeClass"]("sorter-false").attr("aria-disabled",""+i),n.tabIndex&&(i?t.removeAttr("tabindex"):t.attr("tabindex","0")),r&&(i?t.removeAttr("aria-controls"):t.attr("aria-controls",r))},updateHeaderSortCount:function(i,r){var f,u,s,e,h,c,l,o,a=r||i.sortList,v=a.length;for(i.sortList=[],e=0;e<v;e++)if(l=a[e],f=parseInt(l[0],10),f<i.columns){i.sortVars[f].order||(o=i.sortVars[f].order=t.getOrder(i.sortInitialOrder)?[1,0,2]:[0,1,2],i.sortVars[f].count=0),o=i.sortVars[f].order,u=(""+l[1]).match(/^(1|d|s|o|n)/),u=u?u[0]:"";switch(u){case"1":case"d":u=1;break;case"s":u=h||0;break;case"o":c=o[(h||0)%(i.sortReset?3:2)],u=c===0?1:c===1?0:2;break;case"n":u=o[++i.sortVars[f].count%(i.sortReset?3:2)];break;default:u=0}h=e===0?u:h,s=[f,parseInt(u,10)||0],i.sortList[i.sortList.length]=s,u=n.inArray(s[1],o),i.sortVars[f].count=u>=0?u:s[1]%(i.sortReset?3:2)}},updateAll:function(n,i,r){var u=n.table;u.isUpdating=!0,t.refreshWidgets(u,!0,!0),t.buildHeaders(n),t.bindEvents(u,n.$headers,!0),t.bindMethods(n),t.commonUpdate(n,i,r)},update:function(n,i,r){var u=n.table;u.isUpdating=!0,t.updateHeader(n),t.commonUpdate(n,i,r)},updateHeaders:function(n,i){n.table.isUpdating=!0,t.buildHeaders(n),t.bindEvents(n.table,n.$headers,!0),t.resortComplete(n,i)},updateCell:function(i,r,u,f){if(t.isEmptyObject(i.cache)){t.updateHeader(i),t.commonUpdate(i,u,f);return}i.table.isUpdating=!0,i.$table.find(i.selectorRemove).remove();var e,h,w,o,l,a,v=i.$tbodies,s=n(r),y=v.index(n.fn.closest?s.closest("tbody"):s.parents("tbody").filter(":first")),p=i.cache[y],c=n.fn.closest?s.closest("tr"):s.parents("tr").filter(":first");if(r=s[0],v.length&&y>=0){if(w=v.eq(y).find("tr").index(c),l=p.normalized[w],a=c[0].cells.length,a!==i.columns)for(o=0,e=!1,h=0;h<a;h++)e||c[0].cells[h]===r?e=!0:o+=c[0].cells[h].colSpan;else o=s.index();e=t.getElementText(i,r,o),l[i.columns].raw[o]=e,e=t.getParsedText(i,r,o,e),l[o]=e,l[i.columns].$row=c,(i.parsers[o].type||"").toLowerCase()==="numeric"&&(p.colMax[o]=Math.max(Math.abs(e)||0,p.colMax[o]||0)),e=u!=="undefined"?u:i.resort,e!==!1?t.checkResort(i,e,f):t.resortComplete(i,f)}else i.debug&&console.error("updateCell aborted, tbody missing or not within the indicated table"),i.table.isUpdating=!1},addRows:function(i,r,u,f){var a,v,s,o,b,h,k,y,e,p,c,l,w,d=typeof r=="string"&&i.$tbodies.length===1&&/<tr/.test(r||""),g=i.table;if(d)r=n(r),i.$tbodies.append(r);else if(!r||!(r instanceof jQuery)||(n.fn.closest?r.closest("table")[0]:r.parents("table")[0])!==i.table)return i.debug&&console.error("addRows method requires (1) a jQuery selector reference to rows that have already been added to the table, or (2) row HTML string to be added to a table with only one tbody"),!1;if(g.isUpdating=!0,t.isEmptyObject(i.cache))t.updateHeader(i),t.commonUpdate(i,u,f);else{for(b=r.filter("tr").attr("role","row").length,s=i.$tbodies.index(r.parents("tbody").filter(":first")),i.parsers&&i.parsers.length||t.setupParsers(i),o=0;o<b;o++){for(e=0,k=r[o].cells.length,y=i.cache[s].normalized.length,c=[],p={child:[],raw:[],$row:r.eq(o),order:y},h=0;h<k;h++)l=r[o].cells[h],a=t.getElementText(i,l,e),p.raw[e]=a,v=t.getParsedText(i,l,e,a),c[e]=v,(i.parsers[e].type||"").toLowerCase()==="numeric"&&(i.cache[s].colMax[e]=Math.max(Math.abs(v)||0,i.cache[s].colMax[e]||0)),w=l.colSpan-1,w>0&&(e+=w),e++;c[i.columns]=p,i.cache[s].normalized[y]=c}t.checkResort(i,u,f)}},updateCache:function(n,i,r){n.parsers&&n.parsers.length||t.setupParsers(n,r),t.buildCache(n,i,r)},appendCache:function(n,i){var e,c,s,h,u,f,l,r=n.table,y=n.widgetOptions,a=n.$tbodies,o=[],v=n.cache;if(t.isEmptyObject(v))return n.appender?n.appender(r,o):r.isUpdating?n.$table.triggerHandler("updateComplete",r):"";for(n.debug&&(l=new Date),f=0;f<a.length;f++)if(s=a.eq(f),s.length){for(h=t.processTbody(r,s,!0),e=v[f].normalized,c=e.length,u=0;u<c;u++)o[o.length]=e[u][n.columns].$row,n.appender&&(!n.pager||n.pager.removeRows&&y.pager_removeRows||n.pager.ajax)||h.append(e[u][n.columns].$row);t.processTbody(r,h,!1)}n.appender&&n.appender(r,o),n.debug&&console.log("Rebuilt table"+t.benchmark(l)),i||n.appender||t.applyWidget(r),r.isUpdating&&n.$table.triggerHandler("updateComplete",r)},commonUpdate:function(n,i,r){n.$table.find(n.selectorRemove).remove(),t.setupParsers(n),t.buildCache(n),t.checkResort(n,i,r)},initSort:function(i,r,u){if(i.table.isUpdating)return setTimeout(function(){t.initSort(i,r,u)},50);var s,f,l,e,v,h,y,p=!u[i.sortMultiSortKey],a=i.table,w=i.$headers.length,o=parseInt(n(r).attr("data-column"),10),c=i.sortVars[o].order;if(i.$table.triggerHandler("sortStart",a),i.sortVars[o].count=u[i.sortResetKey]?2:(i.sortVars[o].count+1)%(i.sortReset?3:2),i.sortRestart)for(l=0;l<w;l++)y=i.$headers.eq(l),h=parseInt(y.attr("data-column"),10),o!==h&&(p||y.hasClass(t.css.sortNone))&&(i.sortVars[h].count=-1);if(p){if(i.sortList=[],i.last.sortList=[],i.sortForce!==null)for(s=i.sortForce,f=0;f<s.length;f++)s[f][0]!==o&&(i.sortList[i.sortList.length]=s[f]);if(e=c[i.sortVars[o].count],e<2&&(i.sortList[i.sortList.length]=[o,e],r.colSpan>1))for(f=1;f<r.colSpan;f++)i.sortList[i.sortList.length]=[o+f,e],i.sortVars[o+f].count=n.inArray(e,c)}else if(i.sortList=n.extend([],i.last.sortList),t.isValueInArray(o,i.sortList)>=0)for(f=0;f<i.sortList.length;f++)h=i.sortList[f],h[0]===o&&(h[1]=c[i.sortVars[o].count],h[1]===2&&(i.sortList.splice(f,1),i.sortVars[o].count=-1));else if(e=c[i.sortVars[o].count],e<2&&(i.sortList[i.sortList.length]=[o,e],r.colSpan>1))for(f=1;f<r.colSpan;f++)i.sortList[i.sortList.length]=[o+f,e],i.sortVars[o+f].count=n.inArray(e,c);if(i.last.sortList=n.extend([],i.sortList),i.sortList.length&&i.sortAppend&&(s=n.isArray(i.sortAppend)?i.sortAppend:i.sortAppend[i.sortList[0][0]],!t.isEmptyObject(s)))for(f=0;f<s.length;f++)if(s[f][0]!==o&&t.isValueInArray(s[f][0],i.sortList)<0){if(e=s[f][1],v=(""+e).match(/^(a|d|s|o|n)/),v){h=i.sortList[0][1];switch(v[0]){case"d":e=1;break;case"s":e=h;break;case"o":e=h===0?1:0;break;case"n":e=(h+1)%(i.sortReset?3:2);break;default:e=0}}i.sortList[i.sortList.length]=[s[f][0],e]}i.$table.triggerHandler("sortBegin",a),setTimeout(function(){t.setHeadersCss(i),t.multisort(i),t.appendCache(i),i.$table.triggerHandler("sortBeforeEnd",a),i.$table.triggerHandler("sortEnd",a)},1)},multisort:function(n){var r,s,e,h,o=n.table,i=0,u=n.textSorter||"",f=n.sortList,c=f.length,l=n.$tbodies.length;if(!n.serverSideSorting&&!t.isEmptyObject(n.cache)){for(n.debug&&(s=new Date),r=0;r<l;r++)e=n.cache[r].colMax,h=n.cache[r].normalized,h.sort(function(r,s){for(var a,h,w,l,y,p,v=0;v<c;v++){if(h=f[v][0],w=f[v][1],i=w===0,n.sortStable&&r[h]===s[h]&&c===1)return r[n.columns].order-s[n.columns].order;if(a=/n/i.test(t.getSortType(n.parsers,h)),a&&n.strings[h]?(a=typeof t.string[n.strings[h]]=="boolean"?(i?1:-1)*(t.string[n.strings[h]]?-1:1):n.strings[h]?t.string[n.strings[h]]||0:0,l=n.numberSorter?n.numberSorter(r[h],s[h],i,e[h],o):t["sortNumeric"+(i?"Asc":"Desc")](r[h],s[h],a,e[h],h,n)):(y=i?r:s,p=i?s:r,l=typeof u=="function"?u(y[h],p[h],i,h,o):typeof u=="object"&&u.hasOwnProperty(h)?u[h](y[h],p[h],i,h,o):t["sortNatural"+(i?"Asc":"Desc")](r[h],s[h],h,n)),l)return l}return r[n.columns].order-s[n.columns].order});n.debug&&console.log("Applying sort "+f.toString()+t.benchmark(s))}},resortComplete:function(t,i){t.table.isUpdating&&t.$table.triggerHandler("updateComplete",t.table),n.isFunction(i)&&i(t.table)},checkResort:function(i,r,u){var f=n.isArray(r)?r:i.sortList,e=typeof r=="undefined"?i.resort:r;e===!1||i.serverSideSorting||i.table.isProcessing?(t.resortComplete(i,u),t.applyWidget(i.table,!1)):f.length?t.sortOn(i,f,function(){t.resortComplete(i,u)},!0):t.sortReset(i,function(){t.resortComplete(i,u),t.applyWidget(i.table,!1)})},sortOn:function(i,r,u,f){var e=i.table;i.$table.triggerHandler("sortStart",e),t.updateHeaderSortCount(i,r),t.setHeadersCss(i),i.delayInit&&t.isEmptyObject(i.cache)&&t.buildCache(i),i.$table.triggerHandler("sortBegin",e),t.multisort(i),t.appendCache(i,f),i.$table.triggerHandler("sortBeforeEnd",e),i.$table.triggerHandler("sortEnd",e),t.applyWidget(e),n.isFunction(u)&&u(e)},sortReset:function(i,r){i.sortList=[],t.setHeadersCss(i),t.multisort(i),t.appendCache(i),n.isFunction(r)&&r(i.table)},getSortType:function(n,t){return n&&n[t]?n[t].type||"":""},getOrder:function(n){return/^d/i.test(n)||n===1},sortNatural:function(n,i){if(n===i)return 0;var u,f,e,s,r,h,o=t.regex;if(o.hex.test(i)){if(u=parseInt(n.match(o.hex),16),f=parseInt(i.match(o.hex),16),u<f)return-1;if(u>f)return 1}for(u=n.replace(o.chunk,"\\0$1\\0").replace(o.chunks,"").split("\\0"),f=i.replace(o.chunk,"\\0$1\\0").replace(o.chunks,"").split("\\0"),h=Math.max(u.length,f.length),r=0;r<h;r++){if(e=isNaN(u[r])?u[r]||0:parseFloat(u[r])||0,s=isNaN(f[r])?f[r]||0:parseFloat(f[r])||0,isNaN(e)!==isNaN(s))return isNaN(e)?1:-1;if(typeof e!=typeof s&&(e+="",s+=""),e<s)return-1;if(e>s)return 1}return 0},sortNaturalAsc:function(n,i,r,u){if(n===i)return 0;var f=t.string[u.empties[r]||u.emptyTo];return n===""&&f!==0?typeof f=="boolean"?f?-1:1:-f||-1:i===""&&f!==0?typeof f=="boolean"?f?1:-1:f||1:t.sortNatural(n,i)},sortNaturalDesc:function(n,i,r,u){if(n===i)return 0;var f=t.string[u.empties[r]||u.emptyTo];return n===""&&f!==0?typeof f=="boolean"?f?-1:1:f||1:i===""&&f!==0?typeof f=="boolean"?f?1:-1:-f||-1:t.sortNatural(i,n)},sortText:function(n,t){return n>t?1:n<t?-1:0},getTextValue:function(n,t,i){if(i){for(var f=n?n.length:0,u=i+t,r=0;r<f;r++)u+=n.charCodeAt(r);return t*u}return 0},sortNumericAsc:function(n,i,r,u,f,e){if(n===i)return 0;var o=t.string[e.empties[f]||e.emptyTo];return n===""&&o!==0?typeof o=="boolean"?o?-1:1:-o||-1:i===""&&o!==0?typeof o=="boolean"?o?1:-1:o||1:(isNaN(n)&&(n=t.getTextValue(n,r,u)),isNaN(i)&&(i=t.getTextValue(i,r,u)),n-i)},sortNumericDesc:function(n,i,r,u,f,e){if(n===i)return 0;var o=t.string[e.empties[f]||e.emptyTo];return n===""&&o!==0?typeof o=="boolean"?o?-1:1:o||1:i===""&&o!==0?typeof o=="boolean"?o?1:-1:-o||-1:(isNaN(n)&&(n=t.getTextValue(n,r,u)),isNaN(i)&&(i=t.getTextValue(i,r,u)),i-n)},sortNumeric:function(n,t){return n-t},addWidget:function(n){n.id&&!t.isEmptyObject(t.getWidgetById(n.id))&&console.warn('"'+n.id+'" widget was loaded more than once!'),t.widgets[t.widgets.length]=n},hasWidget:function(t,i){return t=n(t),t.length&&t[0].config&&t[0].config.widgetInit[i]||!1},getWidgetById:function(n){for(var i,u=t.widgets.length,r=0;r<u;r++)if(i=t.widgets[r],i&&i.id&&i.id.toLowerCase()===n.toLowerCase())return i},applyWidgetOptions:function(i){var r,u,f=i.config,e=f.widgets.length;if(e)for(r=0;r<e;r++)u=t.getWidgetById(f.widgets[r]),u&&u.options&&(f.widgetOptions=n.extend(!0,{},u.options,f.widgetOptions))},addWidgetFromClass:function(n){var f,i,u=n.config,o="^"+u.widgetClass.replace(t.regex.templateName,"(\\S+)+")+"$",e=new RegExp(o,"g"),r=(n.className||"").split(t.regex.spaces);if(r.length)for(f=r.length,i=0;i<f;i++)r[i].match(e)&&(u.widgets[u.widgets.length]=r[i].replace(e,"$1"))},applyWidgetId:function(i,r,u){i=n(i)[0];var s,h,e,f=i.config,c=f.widgetOptions,o=t.getWidgetById(r);o&&(e=o.id,s=!1,n.inArray(e,f.widgets)<0&&(f.widgets[f.widgets.length]=e),f.debug&&(h=new Date),(u||!f.widgetInit[e])&&(f.widgetInit[e]=!0,i.hasInitialized&&t.applyWidgetOptions(i),typeof o.init=="function"&&(s=!0,f.debug&&console[console.group?"group":"log"]("Initializing "+e+" widget"),o.init(i,o,f,c))),u||typeof o.format!="function"||(s=!0,f.debug&&console[console.group?"group":"log"]("Updating "+e+" widget"),o.format(i,f,c,!1)),f.debug&&s&&(console.log("Completed "+(u?"initializing ":"applying ")+e+" widget"+t.benchmark(h)),console.groupEnd&&console.groupEnd()))},applyWidget:function(i,r,u){i=n(i)[0];var o,s,h,e,l,f=i.config,c=[];if(r===!1||!i.hasInitialized||!i.isApplyingWidgets&&!i.isUpdating){if(f.debug&&(l=new Date),t.addWidgetFromClass(i),clearTimeout(f.timerReady),f.widgets.length){for(i.isApplyingWidgets=!0,f.widgets=n.grep(f.widgets,function(t,i){return n.inArray(t,f.widgets)===i}),h=f.widgets||[],s=h.length,o=0;o<s;o++)e=t.getWidgetById(h[o]),e&&e.id?(e.priority||(e.priority=10),c[o]=e):f.debug&&console.warn('"'+h[o]+'" widget code does not exist!');for(c.sort(function(n,t){return n.priority<t.priority?-1:n.priority===t.priority?0:1}),s=c.length,f.debug&&console[console.group?"group":"log"]("Start "+(r?"initializing":"applying")+" widgets"),o=0;o<s;o++)e=c[o],e&&e.id&&t.applyWidgetId(i,e.id,r);f.debug&&console.groupEnd&&console.groupEnd(),r||typeof u!="function"||u(i)}f.timerReady=setTimeout(function(){i.isApplyingWidgets=!1,n.data(i,"lastWidgetApplication",new Date),f.$table.triggerHandler("tablesorter-ready")},10),f.debug&&(e=f.widgets.length,console.log("Completed "+(r===!0?"initializing ":"applying ")+e+" widget"+(e!==1?"s":"")+t.benchmark(l)))}},removeWidget:function(i,r,u){i=n(i)[0];var e,f,o,h,s=i.config;if(r===!0)for(r=[],h=t.widgets.length,o=0;o<h;o++)f=t.widgets[o],f&&f.id&&(r[r.length]=f.id);else r=(n.isArray(r)?r.join(","):r||"").toLowerCase().split(/[\s,]+/);for(h=r.length,e=0;e<h;e++)f=t.getWidgetById(r[e]),o=n.inArray(r[e],s.widgets),o>=0&&u!==!0&&s.widgets.splice(o,1),f&&f.remove&&(s.debug&&console.log((u?"Refreshing":"Removing")+' "'+r[e]+'" widget'),f.remove(i,s,s.widgetOptions,u),s.widgetInit[r[e]]=!1)},refreshWidgets:function(i,r,u){i=n(i)[0];for(var f,c=i.config,l=c.widgets,h=t.widgets,a=h.length,o=[],s=function(t){n(t).triggerHandler("refreshComplete")},e=0;e<a;e++)f=h[e],f&&f.id&&(r||n.inArray(f.id,l)<0)&&(o[o.length]=f.id);t.removeWidget(i,o.join(","),!0),u!==!0?(t.applyWidget(i,r||!1,s),r&&t.applyWidget(i,!1,s)):s(i)},benchmark:function(n){return" ( "+(+new Date-n.getTime())+"ms )"},log:function(){console.log(arguments)},isEmptyObject:function(n){for(var t in n)return!1;return!0},isValueInArray:function(n,t){for(var r=t&&t.length||0,i=0;i<r;i++)if(t[i][0]===n)return i;return-1},formatFloat:function(i,r){if(typeof i!="string"||i==="")return i;var u,f=r&&r.config?r.config.usNumberFormat!==!1:typeof r!="undefined"?r:!0;return i=f?i.replace(t.regex.comma,""):i.replace(t.regex.digitNonUS,"").replace(t.regex.comma,"."),t.regex.digitNegativeTest.test(i)&&(i=i.replace(t.regex.digitNegativeReplace,"-$1")),u=parseFloat(i),isNaN(u)?n.trim(i):u},isDigit:function(n){return isNaN(n)?t.regex.digitTest.test(n.toString().replace(t.regex.digitReplace,"")):n!==""},computeColumnIndex:function(t,i){for(var s,r,h,u,l,f,v,y,o,p=i&&i.columns||0,e=[],a=new Array(p),c=0;c<t.length;c++)for(l=t[c].cells,s=0;s<l.length;s++){for(u=l[s],f=u.parentNode.rowIndex,v=u.rowSpan||1,y=u.colSpan||1,typeof e[f]=="undefined"&&(e[f]=[]),r=0;r<e[f].length+1;r++)if(typeof e[f][r]=="undefined"){o=r;break}for(p&&u.cellIndex===o||(u.setAttribute?u.setAttribute("data-column",o):n(u).attr("data-column",o)),r=f;r<f+v;r++)for(typeof e[r]=="undefined"&&(e[r]=[]),a=e[r],h=o;h<o+y;h++)a[h]="x"}return a.length},fixColumnWidth:function(i){i=n(i)[0];var o,s,e,h,f,r=i.config,u=r.$table.children("colgroup");if(u.length&&u.hasClass(t.css.colgroup)&&u.remove(),r.widthFixed&&r.$table.children("colgroup").length===0){for(u=n('<colgroup class="'+t.css.colgroup+'">'),o=r.$table.width(),e=r.$tbodies.find("tr:first").children(":visible"),h=e.length,f=0;f<h;f++)s=parseInt(e.eq(f).width()/o*1e3,10)/10+"%",u.append(n("<col>").css("width",s));r.$table.prepend(u)}},getData:function(t,i,r){var e,o,f="",u=n(t);return u.length?(e=n.metadata?u.metadata():!1,o=" "+(u.attr("class")||""),typeof u.data(r)!="undefined"||typeof u.data(r.toLowerCase())!="undefined"?f+=u.data(r)||u.data(r.toLowerCase()):e&&typeof e[r]!="undefined"?f+=e[r]:i&&typeof i[r]!="undefined"?f+=i[r]:o!==" "&&o.match(" "+r+"-")&&(f=o.match(new RegExp("\\s"+r+"-([\\w-]+)"))[1]||""),n.trim(f)):""},getColumnData:function(t,i,r,u,f){if(typeof i!="undefined"&&i!==null){t=n(t)[0];var h,e,o=t.config,c=f||o.$headers,s=o.$headerIndexed&&o.$headerIndexed[r]||c.filter('[data-column="'+r+'"]:last');if(i[r])return u?i[r]:i[c.index(s)];for(e in i)if(typeof e=="string"&&(h=s.filter(e).add(s.find(e)),h.length))return i[e];return}},isProcessing:function(i,r,u){i=n(i);var f=i[0].config,e=u||i.find("."+t.css.header);r?(typeof u!="undefined"&&f.sortList.length>0&&(e=e.filter(function(){return this.sortDisabled?!1:t.isValueInArray(parseFloat(n(this).attr("data-column")),f.sortList)>=0})),i.add(e).addClass(t.css.processing+" "+f.cssProcessing)):i.add(e).removeClass(t.css.processing+" "+f.cssProcessing)},processTbody:function(t,i,r){if(t=n(t)[0],r)return t.isProcessing=!0,i.before('<colgroup class="tablesorter-savemyplace"/>'),n.fn.detach?i.detach():i.remove();var u=n(t).find("colgroup.tablesorter-savemyplace");i.insertAfter(u),u.remove(),t.isProcessing=!1},clearTableBody:function(t){n(t)[0].config.$tbodies.children().detach()},characterEquivalents:{a:"áàâãäąå",A:"ÁÀÂÃÄĄÅ",c:"çćč",C:"ÇĆČ",e:"éèêëěę",E:"ÉÈÊËĚĘ",i:"íìİîïı",I:"ÍÌİÎÏ",o:"óòôõöō",O:"ÓÒÔÕÖŌ",ss:"ß",SS:"ẞ",u:"úùûüů",U:"ÚÙÛÜŮ"},replaceAccents:function(n){var i,u="[",r=t.characterEquivalents;if(!t.characterRegex){t.characterRegexArray={};for(i in r)typeof i=="string"&&(u+=r[i],t.characterRegexArray[i]=new RegExp("["+r[i]+"]","g"));t.characterRegex=new RegExp(u+"]")}if(t.characterRegex.test(n))for(i in r)typeof i=="string"&&(n=n.replace(t.characterRegexArray[i],i));return n},restoreHeaders:function(i){for(var u,f=n(i)[0].config,e=f.$table.find(f.selectorHeaders),o=e.length,r=0;r<o;r++)u=e.eq(r),u.find("."+t.css.headerIn).length&&u.html(f.headerContent[r])},destroy:function(i,r,u){if(i=n(i)[0],i.hasInitialized){t.removeWidget(i,!0,!1);var o,e=n(i),f=i.config,c=f.debug,s=e.find("thead:first"),h=s.find("tr."+t.css.headerRow).removeClass(t.css.headerRow+" "+f.cssHeaderRow),l=e.find("tfoot:first > tr").children("th, td");r===!1&&n.inArray("uitheme",f.widgets)>=0&&(e.triggerHandler("applyWidgetId",["uitheme"]),e.triggerHandler("applyWidgetId",["zebra"])),s.find("tr").not(h).remove(),o="sortReset update updateRows updateAll updateHeaders updateCell addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets removeWidget destroy mouseup mouseleave "+"keypress sortBegin sortEnd resetToLoadState ".split(" ").join(f.namespace+" "),e.removeData("tablesorter").unbind(o.replace(t.regex.spaces," ")),f.$headers.add(l).removeClass([t.css.header,f.cssHeader,f.cssAsc,f.cssDesc,t.css.sortAsc,t.css.sortDesc,t.css.sortNone].join(" ")).removeAttr("data-column").removeAttr("aria-label").attr("aria-disabled","true"),h.find(f.selectorSort).unbind("mousedown mouseup keypress ".split(" ").join(f.namespace+" ").replace(t.regex.spaces," ")),t.restoreHeaders(i),e.toggleClass(t.css.table+" "+f.tableClass+" tablesorter-"+f.theme,r===!1),i.hasInitialized=!1,delete i.config.cache,typeof u=="function"&&u(i),c&&console.log("tablesorter has been removed")}}};n.fn.tablesorter=function(i){return this.each(function(){var r=this,u=n.extend(!0,{},t.defaults,i,t.instanceMethods);u.originalSettings=i,!r.hasInitialized&&t.buildTable&&this.nodeName!=="TABLE"?t.buildTable(r,u):t.setup(r,u)})},window.console&&window.console.log||(t.logs=[],console={},console.log=console.warn=console.error=console.table=function(){var n=arguments.length>1?arguments:arguments[0];t.logs[t.logs.length]={date:Date.now(),log:n}}),t.addParser({id:"no-parser",is:function(){return!1},format:function(){return""},type:"text"}),t.addParser({id:"text",is:function(){return!0},format:function(i,r){var u=r.config;return i&&(i=n.trim(u.ignoreCase?i.toLocaleLowerCase():i),i=u.sortLocaleCompare?t.replaceAccents(i):i),i},type:"text"}),t.regex.nondigit=/[^\w,. \-()]/g,t.addParser({id:"digit",is:function(n){return t.isDigit(n)},format:function(i,r){var u=t.formatFloat((i||"").replace(t.regex.nondigit,""),r);return i&&typeof u=="number"?u:i?n.trim(i&&r.config.ignoreCase?i.toLocaleLowerCase():i):i},type:"numeric"}),t.regex.currencyReplace=/[+\-,. ]/g,t.regex.currencyTest=/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/,t.addParser({id:"currency",is:function(n){return n=(n||"").replace(t.regex.currencyReplace,""),t.regex.currencyTest.test(n)},format:function(i,r){var u=t.formatFloat((i||"").replace(t.regex.nondigit,""),r);return i&&typeof u=="number"?u:i?n.trim(i&&r.config.ignoreCase?i.toLocaleLowerCase():i):i},type:"numeric"}),t.regex.urlProtocolTest=/^(https?|ftp|file):\/\//,t.regex.urlProtocolReplace=/(https?|ftp|file):\/\//,t.addParser({id:"url",is:function(n){return t.regex.urlProtocolTest.test(n)},format:function(i){return i?n.trim(i.replace(t.regex.urlProtocolReplace,"")):i},parsed:!0,type:"text"}),t.regex.dash=/-/g,t.regex.isoDate=/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/,t.addParser({id:"isoDate",is:function(n){return t.regex.isoDate.test(n)},format:function(n){var r=n?new Date(n.replace(t.regex.dash,"/")):n;return r instanceof Date&&isFinite(r)?r.getTime():n},type:"numeric"}),t.regex.percent=/%/g,t.regex.percentTest=/(\d\s*?%|%\s*?\d)/,t.addParser({id:"percent",is:function(n){return t.regex.percentTest.test(n)&&n.length<15},format:function(n,i){return n?t.formatFloat(n.replace(t.regex.percent,""),i):n},type:"numeric"}),t.addParser({id:"image",is:function(n,t,i,r){return r.find("img").length>0},format:function(t,i,r){return n(r).find("img").attr(i.config.imgAttr||"alt")||t},parsed:!0,type:"text"}),t.regex.dateReplace=/(\S)([AP]M)$/i,t.regex.usLongDateTest1=/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i,t.regex.usLongDateTest2=/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i,t.addParser({id:"usLongDate",is:function(n){return t.regex.usLongDateTest1.test(n)||t.regex.usLongDateTest2.test(n)},format:function(n){var r=n?new Date(n.replace(t.regex.dateReplace,"$1 $2")):n;return r instanceof Date&&isFinite(r)?r.getTime():n},type:"numeric"}),t.regex.shortDateTest=/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/,t.regex.shortDateReplace=/[\-.,]/g,t.regex.shortDateXXY=/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,t.regex.shortDateYMD=/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,t.convertFormat=function(n,i){n=(n||"").replace(t.regex.spaces," ").replace(t.regex.shortDateReplace,"/"),i==="mmddyyyy"?n=n.replace(t.regex.shortDateXXY,"$3/$1/$2"):i==="ddmmyyyy"?n=n.replace(t.regex.shortDateXXY,"$3/$2/$1"):i==="yyyymmdd"&&(n=n.replace(t.regex.shortDateYMD,"$1/$2/$3"));var r=new Date(n);return r instanceof Date&&isFinite(r)?r.getTime():""},t.addParser({id:"shortDate",is:function(n){return n=(n||"").replace(t.regex.spaces," ").replace(t.regex.shortDateReplace,"/"),t.regex.shortDateTest.test(n)},format:function(n,i,r,u){if(n){var e=i.config,f=e.$headerIndexed[u],o=f.length&&f.data("dateFormat")||t.getData(f,t.getColumnData(i,e.headers,u),"dateFormat")||e.dateFormat;return f.length&&f.data("dateFormat",o),t.convertFormat(n,o)||n}return n},type:"numeric"}),t.regex.timeTest=/^([1-9]|1[0-2]):([0-5]\d)(\s[AP]M)$|^((?:[01]\d|[2][0-4]):[0-5]\d)$/i,t.regex.timeMatch=/([1-9]|1[0-2]):([0-5]\d)(\s[AP]M)|((?:[01]\d|[2][0-4]):[0-5]\d)/i,t.addParser({id:"time",is:function(n){return t.regex.timeTest.test(n)},format:function(n){var e,o=(n||"").match(t.regex.timeMatch),r=new Date(n),f=n&&(o!==null?o[0]:"00:00 AM"),u=f?new Date("2000/01/01 "+f.replace(t.regex.dateReplace,"$1 $2")):f;return u instanceof Date&&isFinite(u)?(e=r instanceof Date&&isFinite(r)?r.getTime():0,e?parseFloat(u.getTime()+"."+r.getTime()):u.getTime()):n},type:"numeric"}),t.addParser({id:"metadata",is:function(){return!1},format:function(t,i,r){var u=i.config,f=u.parserMetadataName?u.parserMetadataName:"sortValue";return n(r).metadata()[f]},type:"numeric"}),t.addWidget({id:"zebra",priority:90,format:function(t,i,r){for(var e,o,s,h,u,c,a=new RegExp(i.cssChildRow,"i"),l=i.$tbodies.add(n(i.namespace+"_extra_table").children("tbody:not(."+i.cssInfoBlock+")")),f=0;f<l.length;f++)for(s=0,e=l.eq(f).children("tr:visible").not(i.selectorRemove),c=e.length,u=0;u<c;u++)o=e.eq(u),a.test(o[0].className)||s++,h=s%2==0,o.removeClass(r.zebra[h?1:0]).addClass(r.zebra[h?0:1])},remove:function(n,i,r,u){if(!u)for(var e,o=i.$tbodies,s=(r.zebra||["even","odd"]).join(" "),f=0;f<o.length;f++)e=t.processTbody(n,o.eq(f),!0),e.children().removeClass(s),t.processTbody(n,e,!1)}})})(jQuery),function(n){"use strict";var t=n.tablesorter,i=function(t){var i,u,f,r,o,e=t.config;e&&(u=e.widgetOptions,e.$tbodies.each(function(){i=n(this).children(),o=i.length,i.filter(u.staticRow_class).each(function(){i=n(this),r=i.data(u.staticRow_index),typeof r!="undefined"?(f=parseFloat(r),r=/%/.test(r)?Math.round(f/100*o):f):r=i.index(),i.data(u.staticRow_data,r)})}))};t.addWidget({id:"staticRow",options:{staticRow_class:".static",staticRow_data:"static-index",staticRow_index:"row-index",staticRow_event:"staticRowsRefresh"},init:function(n,r,u,f){i(n),u.$table.unbind(("updateComplete.tsstaticrows "+f.staticRow_event).replace(/\s+/g," ")).bind("updateComplete.tsstaticrows "+f.staticRow_event,function(){i(n),t.applyWidget(n)})},format:function(t,i,r){var u,e,h,o,f,s,c,l;i.$tbodies.each(function(){for(f=n.tablesorter.processTbody(t,n(this),!0),s=!0,h=0,c=f.children(r.staticRow_class),o=f.children("tr").length-1,l=c.length;s&&h<l;)s=!1,c.each(function(){u=n(this).data(r.staticRow_data),u=u>=o?o:u<0?0:u,u!==n(this).index()&&(s=!0,e=n(this).detach(),u>=o?e.appendTo(f):u===0?e.prependTo(f):e.insertBefore(f.find("tr:eq("+u+")")))}),h++;n.tablesorter.processTbody(t,f,!1)}),i.$table.triggerHandler("staticRowsComplete",t)},remove:function(n,t,i){t.$table.unbind(("updateComplete.tsstaticrows "+i.staticRow_event).replace(/\s+/g," "))}})}(jQuery);var vems=vems||{},ModalType={BookingOnly:"BookingOnly",Reservation:"Reservation"};$.tablesorter.addParser({id:"moment-dates",is:function(){return!1},format:function(n){return moment(n)._d.getTime()},type:"numeric"})